<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ghcn • ghcn</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ghcn">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ghcn</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/ghcn.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>ghcn</h1>
            
      

      <div class="d-none name"><code>ghcn.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-to-ghcn-d-and-aws">Introduction to GHCN-D and AWS<a class="anchor" aria-label="anchor" href="#introduction-to-ghcn-d-and-aws"></a>
</h2>
<p>The Global Historical Climatology Network - Daily (GHCN-D) is a
comprehensive database of daily climate summaries from land surface
stations across the globe. This dataset is maintained by NOAA’s National
Centers for Environmental Information (NCEI) and includes records from
over 100,000 stations in 180 countries and territories.</p>
<p>The GHCN-D dataset is now available on Amazon Web Services (AWS) S3,
making it easier to access and analyze this valuable climate data. The
<code>ghcn</code> package provides tools to efficiently work with this
AWS-hosted dataset.</p>
<div class="section level3">
<h3 id="comparing-aws-bucket-vs-noaa-ncei-api">Comparing AWS Bucket vs NOAA NCEI API<a class="anchor" aria-label="anchor" href="#comparing-aws-bucket-vs-noaa-ncei-api"></a>
</h3>
<p>While the GHCN-D data has traditionally been accessible through the
NOAA NCEI API, the availability on AWS offers some distinct advantages.
Let’s compare these two methods:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Data Freshness</strong>:
<ul>
<li>NOAA NCEI API: Provides the most up-to-date data, including recent
observations.</li>
<li>AWS Bucket: Updated daily, but may have a slight lag compared to the
API.</li>
</ul>
</li>
<li>
<strong>Access Speed</strong>:
<ul>
<li>NOAA NCEI API: Can be slower, especially for large data requests,
due to server-side processing.</li>
<li>AWS Bucket: Generally faster, especially for bulk data access, as
files are directly available.</li>
</ul>
</li>
<li>
<strong>Query Flexibility</strong>:
<ul>
<li>NOAA NCEI API: Offers more flexible querying options, allowing for
complex filters on the server-side.</li>
<li>AWS Bucket: Requires client-side filtering, but the
<code>ghcn</code> package simplifies this process.</li>
</ul>
</li>
<li>
<strong>Data Format</strong>:
<ul>
<li>NOAA NCEI API: Provides data in various formats, including CSV and
JSON.</li>
<li>AWS Bucket: Data is in CSV format, which the <code>ghcn</code>
package efficiently processes.</li>
</ul>
</li>
<li>
<strong>Usage Limits</strong>:
<ul>
<li>NOAA NCEI API: Has rate limits and may require authentication for
large requests.</li>
<li>AWS Bucket: No rate limits for data access, but standard AWS data
transfer costs may apply.</li>
</ul>
</li>
<li>
<strong>Ease of Bulk Data Access</strong>:
<ul>
<li>NOAA NCEI API: Can be cumbersome for accessing large volumes of
data.</li>
<li>AWS Bucket: Excels at providing easy access to large datasets.</li>
</ul>
</li>
<li>
<strong>Integration with Cloud Computing</strong>:
<ul>
<li>NOAA NCEI API: Requires data to be downloaded to local or cloud
storage before processing.</li>
<li>AWS Bucket: Allows for direct integration with AWS cloud computing
services.</li>
</ul>
</li>
</ol>
<p>The <code>ghcn</code> package leverages the advantages of the
AWS-hosted dataset, providing fast and efficient access to GHCN-D data
without the need to worry about API rate limits or complex query
constructions. This makes it particularly suitable for large-scale data
analysis and research projects that require access to extensive
historical climate data.</p>
<p>While the NOAA NCEI API remains valuable for accessing the most
current data and for very specific queries, the AWS bucket approach used
by the <code>ghcn</code> package offers a streamlined experience for
most research and analysis needs, especially when working with
historical data at scale.</p>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the <code>ghcn</code> package using one of the
following methods:</p>
<div class="section level3">
<h3 id="using-remotes">Using remotes<a class="anchor" aria-label="anchor" href="#using-remotes"></a>
</h3>
<p>The easiest way to install the package is using the
<code>remotes</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"joshbrinks/ghcn"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cloning-the-repository">Cloning the repository<a class="anchor" aria-label="anchor" href="#cloning-the-repository"></a>
</h3>
<p>If you want to clone the repository and install the package locally,
follow these steps:</p>
<ol style="list-style-type: decimal">
<li>
<p>Clone the repository:</p>
<pre><code>git clone https://github.com/joshbrinks/ghcn.git</code></pre>
</li>
<li>
<p>Open R or RStudio and set your working directory to the cloned
repository:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"path/to/ghcn"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Install the package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="development-version">Development version<a class="anchor" aria-label="anchor" href="#development-version"></a>
</h3>
<p>To install the development version of the package, you can use:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"joshbrinks/ghcn@develop"</span><span class="op">)</span></span></code></pre></div>
<p>This will install the latest version from the <code>develop</code>
branch.</p>
<p>After installation, you can load the package using:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://joshbrinks.github.io/ghcn/">ghcn</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="using-the-ghcn-package">Using the ghcn Package<a class="anchor" aria-label="anchor" href="#using-the-ghcn-package"></a>
</h2>
<p>The <code>ghcn</code> package offers three main functions to work
with the GHCN-D data on AWS:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/find_stations_aws.html">find_stations_aws()</a></code>: Find weather stations near a given
location.</li>
<li>
<code><a href="../reference/get_inventory_aws.html">get_inventory_aws()</a></code>: Retrieve inventory information for
specific stations.</li>
<li>
<code><a href="../reference/get_data_aws.html">get_data_aws()</a></code>: Fetch actual weather data for specified
stations and time periods.</li>
</ol>
<p>Let’s walk through how to use these functions together.</p>
<div class="section level3">
<h3 id="finding-nearby-stations">Finding Nearby Stations<a class="anchor" aria-label="anchor" href="#finding-nearby-stations"></a>
</h3>
<p>First, let’s find weather stations near New York City:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyc_stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_stations_aws.html">find_stations_aws</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="fl">40.7128</span>, lon <span class="op">=</span> <span class="op">-</span><span class="fl">74.0060</span>, radius <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nyc_stations</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##             id latitude longitude elevation  state</span></span>
<span><span class="co">##         &lt;char&gt;    &lt;num&gt;     &lt;num&gt;     &lt;num&gt; &lt;char&gt;</span></span>
<span><span class="co">## 1: USC00305816  40.7106  -74.0142      25.3     NY</span></span>
<span><span class="co">## 2: USC00309580  40.7103  -74.0142      12.2     NY</span></span>
<span><span class="co">## 3: US1NYNY0078  40.7339  -73.9844       6.1     NY</span></span>
<span><span class="co">## 4: US1NYKN0025  40.6846  -73.9867       5.5     NY</span></span>
<span><span class="co">## 5: US1NJHD0023  40.7326  -74.0510      30.2     NJ</span></span>
<span><span class="co">## 6: USC00300958  40.6892  -73.9550      15.2     NY</span></span>
<span><span class="co">##                              name gsn_flag hcn_crn_flag wmo_id geo_distance</span></span>
<span><span class="co">##                            &lt;char&gt;   &lt;char&gt;       &lt;char&gt; &lt;char&gt;        &lt;num&gt;</span></span>
<span><span class="co">## 1:                WORLD TRADE CTR                                  0.733160</span></span>
<span><span class="co">## 2:                WORLD TRADE CTR                                  0.744956</span></span>
<span><span class="co">## 3: STUYVESANT SQUARE PARK - NEW Y                                  2.969520</span></span>
<span><span class="co">## 4:                BROOKLYN 3.1 NW                                  3.532681</span></span>
<span><span class="co">## 5:            JERSEY CITY 1.6 NNE                                  4.385017</span></span>
<span><span class="co">## 6:                       BROOKLYN                                  5.036879</span></span></code></pre>
<p>This gives us a list of stations within a 50km radius of NYC, sorted
by distance.</p>
</div>
<div class="section level3">
<h3 id="getting-station-inventory">Getting Station Inventory<a class="anchor" aria-label="anchor" href="#getting-station-inventory"></a>
</h3>
<p>Now, let’s check what data is available for the first two
stations:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">station_ids</span> <span class="op">&lt;-</span> <span class="va">nyc_stations</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">inventory</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_inventory_aws.html">get_inventory_aws</a></span><span class="op">(</span><span class="va">station_ids</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">inventory</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     station_id element                                            description</span></span>
<span><span class="co">##         &lt;char&gt;  &lt;char&gt;                                                 &lt;char&gt;</span></span>
<span><span class="co">## 1: USC00305816    AWND Average daily wind speed (tenths of meters per second)</span></span>
<span><span class="co">## 2: USC00305816    PRCP                           Precipitation (tenths of mm)</span></span>
<span><span class="co">## 3: USC00305816    SNOW                                          Snowfall (mm)</span></span>
<span><span class="co">## 4: USC00305816    SNWD                                        Snow depth (mm)</span></span>
<span><span class="co">## 5: USC00305816    TMAX        Maximum temperature (tenths of degrees Celsius)</span></span>
<span><span class="co">## 6: USC00305816    TMIN        Minimum temperature (tenths of degrees Celsius)</span></span>
<span><span class="co">##    first_year last_year coverage_years completeness</span></span>
<span><span class="co">##         &lt;int&gt;     &lt;int&gt;          &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">## 1:       2022      2024              3            1</span></span>
<span><span class="co">## 2:       1871      2024            154            1</span></span>
<span><span class="co">## 3:       1884      2024            141            1</span></span>
<span><span class="co">## 4:       1893      2024            132            1</span></span>
<span><span class="co">## 5:       1871      2024            154            1</span></span>
<span><span class="co">## 6:       1871      2024            154            1</span></span></code></pre>
<p>This inventory shows us what variables are available for each station
and their period of record.</p>
</div>
<div class="section level3">
<h3 id="fetching-weather-data">Fetching Weather Data<a class="anchor" aria-label="anchor" href="#fetching-weather-data"></a>
</h3>
<p>Let’s fetch temperature data for the first station for the year
2022:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">station_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_aws.html">get_data_aws</a></span><span class="op">(</span></span>
<span>  station_id <span class="op">=</span> <span class="va">station_ids</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2022-12-31"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TMAX"</span>, <span class="st">"TMIN"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">station_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Key: &lt;ID, DATE&gt;</span></span>
<span><span class="co">##             ID       DATE  TMAX  TMIN</span></span>
<span><span class="co">##         &lt;char&gt;     &lt;Date&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">## 1: USC00305816 2022-02-09    67    22</span></span>
<span><span class="co">## 2: USC00305816 2022-02-10   111    -6</span></span>
<span><span class="co">## 3: USC00305816 2022-02-11   128   111</span></span>
<span><span class="co">## 4: USC00305816 2022-02-12   133    44</span></span>
<span><span class="co">## 5: USC00305816 2022-02-13   139    -6</span></span>
<span><span class="co">## 6: USC00305816 2022-02-14   100   -11</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="demonstrating-functionality">Demonstrating Functionality<a class="anchor" aria-label="anchor" href="#demonstrating-functionality"></a>
</h2>
<div class="section level3">
<h3 id="multiple-stations">Multiple Stations<a class="anchor" aria-label="anchor" href="#multiple-stations"></a>
</h3>
<p>We can fetch data for multiple stations at once:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_station_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_aws.html">get_data_aws</a></span><span class="op">(</span></span>
<span>  station_id <span class="op">=</span> <span class="va">station_ids</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2022-12-31"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TMAX"</span>, <span class="st">"TMIN"</span>, <span class="st">"PRCP"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">multi_station_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Key: &lt;ID, DATE&gt;</span></span>
<span><span class="co">##             ID       DATE  PRCP  TMAX  TMIN</span></span>
<span><span class="co">##         &lt;char&gt;     &lt;Date&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">## 1: USC00305816 2022-02-01     0    NA    NA</span></span>
<span><span class="co">## 2: USC00305816 2022-02-02     0    NA    NA</span></span>
<span><span class="co">## 3: USC00305816 2022-02-03     0    NA    NA</span></span>
<span><span class="co">## 4: USC00305816 2022-02-04     0    NA    NA</span></span>
<span><span class="co">## 5: USC00305816 2022-02-05     0    NA    NA</span></span>
<span><span class="co">## 6: USC00305816 2022-02-06     0    NA    NA</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="long-format-data">Long Format Data<a class="anchor" aria-label="anchor" href="#long-format-data"></a>
</h3>
<p>By default, <code><a href="../reference/get_data_aws.html">get_data_aws()</a></code> returns data in wide format.
We can get long format data by specifying the <code>format</code>
parameter:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">long_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data_aws.html">get_data_aws</a></span><span class="op">(</span></span>
<span>  station_id <span class="op">=</span> <span class="va">station_ids</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2022-12-31"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TMAX"</span>, <span class="st">"TMIN"</span>, <span class="st">"PRCP"</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"long"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">long_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##             ID       DATE ELEMENT DATA_VALUE M_FLAG Q_FLAG S_FLAG OBS_TIME</span></span>
<span><span class="co">##         &lt;char&gt;     &lt;Date&gt;  &lt;char&gt;      &lt;int&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;    &lt;int&gt;</span></span>
<span><span class="co">## 1: USC00305816 2022-02-01    PRCP          0                    7       NA</span></span>
<span><span class="co">## 2: USC00305816 2022-02-02    PRCP          0                    7       NA</span></span>
<span><span class="co">## 3: USC00305816 2022-02-03    PRCP          0                    7       NA</span></span>
<span><span class="co">## 4: USC00305816 2022-02-04    PRCP          0                    7       NA</span></span>
<span><span class="co">## 5: USC00305816 2022-02-05    PRCP          0                    7       NA</span></span>
<span><span class="co">## 6: USC00305816 2022-02-06    PRCP          0                    7       NA</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="data-visualization-and-analysis">Data Visualization and Analysis<a class="anchor" aria-label="anchor" href="#data-visualization-and-analysis"></a>
</h2>
<p>Let’s visualize the temperature data for one station using
ggplot2:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">station_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">DATE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">TMAX</span>, color <span class="op">=</span> <span class="st">"Max Temp"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">TMIN</span>, color <span class="op">=</span> <span class="st">"Min Temp"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Max Temp"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"Min Temp"</span> <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Daily Temperature Range in 2022"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Station:"</span>, <span class="va">station_ids</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Temperature (tenths of degrees Celsius)"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Temperature Type"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ghcn_files/figure-html/visualize_temp-1.png" width="700"></p>
<p>We can also look at the distribution of daily temperature ranges:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">station_data</span><span class="op">[</span>, <span class="va">temp_range</span> <span class="op">:=</span> <span class="va">TMAX</span> <span class="op">-</span> <span class="va">TMIN</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">station_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">temp_range</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">10</span>, fill <span class="op">=</span> <span class="st">"skyblue"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribution of Daily Temperature Ranges"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Station:"</span>, <span class="va">station_ids</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Temperature Range (tenths of degrees Celsius)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: Removed 3 rows containing non-finite outside the scale range</span></span>
<span><span class="co">## (`stat_bin()`).</span></span></code></pre>
<p><img src="ghcn_files/figure-html/temp_range-1.png" width="700"></p>
<p>Let’s analyze precipitation patterns:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_station_data</span><span class="op">[</span>, <span class="va">month</span> <span class="op">:=</span> <span class="fu">month</span><span class="op">(</span><span class="va">DATE</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">monthly_precip</span> <span class="op">&lt;-</span> <span class="va">multi_station_data</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>total_precip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">PRCP</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                     by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">ID</span>, <span class="va">month</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">monthly_precip</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">month</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">total_precip</span>, fill <span class="op">=</span> <span class="va">ID</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_discrete</span><span class="op">(</span>labels <span class="op">=</span> <span class="va">month.abb</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Monthly Precipitation in 2022"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Month"</span>, y <span class="op">=</span> <span class="st">"Total Precipitation (tenths of mm)"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Station ID"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ghcn_files/figure-html/precip_analysis-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The <code>ghcn</code> package provides powerful tools for accessing
and analyzing GHCN-D data from AWS. By combining these functions with
data manipulation and visualization libraries like data.table and
ggplot2, you can easily explore climate patterns and trends.</p>
<p>Remember to cite the GHCN-D dataset in your work:</p>
<p>Menne, M.J., I. Durre, B. Korzeniewski, S. McNeal, K. Thomas, X. Yin,
S. Anthony, R. Ray, R.S. Vose, B.E.Gleason, and T.G. Houston, 2012:
Global Historical Climatology Network - Daily (GHCN-Daily), Version 3.
[indicate subset used following decimal, e.g. Version 3.12]. NOAA
National Climatic Data Center. <a href="http://doi.org/10.7289/V5D21VHZ" class="external-link uri">http://doi.org/10.7289/V5D21VHZ</a> [access date].</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
